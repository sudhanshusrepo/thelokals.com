(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[404],{5703:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(4568),i=s(7620),n=s(9748),r=s(1104),l=s(6699);function o(){let e=(0,n.useRouter)(),[t,s]=(0,i.useState)("Analysing your request..."),[o,c]=(0,i.useState)(0);(0,i.useEffect)(()=>{(async()=>{s("Analysing issue details..."),await d(0,30,800),s("Scanning nearby verified providers..."),await d(30,70,1500),s("Best provider matched!"),await d(70,100,500),u()})()},[]);let d=(e,t,s)=>new Promise(a=>{let i=s/20,n=(t-e)/i,r=e,l=0,o=setInterval(()=>{r+=n,l++,c(Math.min(r,100)),l>=i&&(clearInterval(o),a())},20)}),u=async()=>{try{let t=localStorage.getItem("booking_intent");if(!t)return void e.push("/");let s=JSON.parse(t),{data:{user:a}}=await r.N.auth.getUser();if(!a)throw Error("No user found");let{data:i,error:n}=await r.N.from("bookings").insert({user_id:a.id,service_code:s.service_code,status:"PENDING",booking_type:"LIVE",location:"POINT(77.0266 28.4595)",base_price_cents:Math.round(100*s.base_price),total_amount_cents:Math.round(100*s.final_price),customer_location_lat:28.4595,customer_location_lng:77.0266,metadata:{issue_type:s.issue_type}}).select().single();if(n)throw n;l.oR.success("Provider Matched!"),e.push("/booking-confirmed")}catch(t){console.error(t),l.oR.error("Matching failed. Please try again."),e.push("/")}};return(0,a.jsxs)("div",{className:"min-h-screen bg-slate-50 flex flex-col items-center justify-center p-6 text-center",children:[(0,a.jsxs)("div",{className:"relative w-48 h-48 mb-12",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-indigo-500/10 rounded-full animate-ping"}),(0,a.jsx)("div",{className:"absolute inset-4 bg-indigo-500/20 rounded-full animate-pulse"}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-6xl animate-bounce",children:"\uD83E\uDD16"})})]}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:t}),(0,a.jsx)("p",{className:"text-slate-500 mb-8 max-w-xs mx-auto",children:"AI is searching for the highest-rated pro near Sector 45..."}),(0,a.jsx)("div",{className:"w-full max-w-xs bg-slate-200 rounded-full h-2 overflow-hidden",children:(0,a.jsx)("div",{className:"bg-indigo-600 h-full rounded-full transition-all duration-300 ease-out",style:{width:`${o}%`}})})]})}},9173:(e,t,s)=>{Promise.resolve().then(s.bind(s,5703))}},e=>{e.O(0,[740,532,587,968,358],()=>e(e.s=9173)),_N_E=e.O()}]);