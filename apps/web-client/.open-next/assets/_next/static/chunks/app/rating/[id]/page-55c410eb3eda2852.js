(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[340],{4219:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(4568),o=s(7620),i=s(9748),r=s(1104),l=s(6699);function n(){let e=(0,i.useParams)(),t=(0,i.useRouter)(),s=e.id,[n,c]=(0,o.useState)(0),[d,u]=(0,o.useState)(""),[m,x]=(0,o.useState)(!1),[h,b]=(0,o.useState)(0),f=async()=>{if(0===n)return void l.oR.error("Please select a star rating");x(!0);try{let{error:e}=await r.N.from("bookings").update({customer_rating:n,customer_review:d,customer_rating_timestamp:new Date().toISOString()}).eq("id",s);if(e)throw e;l.oR.success("Thank you for your feedback!"),t.push("/")}catch(e){console.error(e),l.oR.error("Failed to submit rating")}finally{x(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-slate-50 flex flex-col items-center justify-center p-6",children:(0,a.jsxs)("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center animate-scale-in",children:[(0,a.jsx)("div",{className:"text-6xl mb-6 animate-bounce",children:"Check Mark / Confetti \uD83C\uDF89"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Service Completed!"}),(0,a.jsx)("p",{className:"text-slate-500 mb-8",children:"How was your experience with your provider?"}),(0,a.jsx)("div",{className:"flex justify-center gap-2 mb-8",children:[1,2,3,4,5].map(e=>(0,a.jsx)("button",{className:"text-4xl transition-transform hover:scale-110 focus:outline-none",onMouseEnter:()=>b(e),onMouseLeave:()=>b(n),onClick:()=>c(e),children:(0,a.jsx)("span",{className:e<=(h||n)?"text-amber-400 drop-shadow-sm":"text-slate-200",children:"â˜…"})},e))}),n>0&&(0,a.jsx)("div",{className:"text-indigo-600 font-bold text-lg mb-6 animate-fade-in",children:5===n?"Excellent! \uD83E\uDD29":4===n?"Very Good \uD83D\uDE42":3===n?"Average \uD83D\uDE10":2===n?"Poor \uD83D\uDE1E":"Terrible \uD83D\uDE21"}),(0,a.jsx)("textarea",{className:"w-full p-4 border border-slate-200 rounded-xl bg-slate-50 mb-6 focus:ring-2 focus:ring-indigo-500 focus:outline-none resize-none transition-all",rows:3,placeholder:"Write a review (optional)...",value:d,onChange:e=>u(e.target.value)}),(0,a.jsx)("button",{onClick:f,disabled:m,className:"w-full bg-indigo-600 text-white py-4 rounded-xl font-bold text-lg shadow-lg shadow-indigo-200 hover:bg-indigo-700 active:scale-[0.98] transition-all disabled:opacity-70",children:m?"Submitting...":"Submit Feedback"}),(0,a.jsx)("button",{onClick:()=>t.push("/"),className:"mt-4 text-slate-400 text-sm font-medium hover:text-slate-600",children:"Skip Feedback"})]})})}},7021:(e,t,s)=>{Promise.resolve().then(s.bind(s,4219))}},e=>{e.O(0,[740,532,587,968,358],()=>e(e.s=7021)),_N_E=e.O()}]);